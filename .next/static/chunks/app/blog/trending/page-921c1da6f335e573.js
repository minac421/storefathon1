(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4833],{2247:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),l=s(2115),n=s(5695),a=s(6874),i=s.n(a),o=s(6631),c=function(e){return e.POPULAR="popular",e.COMMENTS="comments",e.RECENT="recent",e.FEATURED="featured",e}(c||{});let d={popular:"الأكثر شعبية",comments:"الأكثر تعليقات",recent:"أحدث المنشورات",featured:"منشورات مميزة"};function m(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),s=t.get("type")||"popular",[a,m]=(0,l.useState)([]),[h,x]=(0,l.useState)(!0),[u,g]=(0,l.useState)(null),[b,p]=(0,l.useState)(s),[w,j]=(0,l.useState)("week");(0,l.useEffect)(()=>{s!==b&&p(s),(async()=>{try{x(!0);let e="/api/blog?sort=".concat(b,"&timeRange=").concat(w),t=await fetch(e);if(!t.ok)throw Error("خطأ في الاتصال: ".concat(t.status));let s=await t.json();m(s.posts||[])}catch(e){console.error("خطأ في تحميل المقالات الأكثر تفاعلاً:",e),g("حدث خطأ أثناء تحميل المقالات. يرجى المحاولة مرة أخرى.")}finally{x(!1)}})()},[b,w,s]);let v=s=>{p(s);let r=new URLSearchParams(t.toString());r.set("type",s),e.push("/blog/trending?".concat(r.toString()))},f=e=>{j(e)};return(0,r.jsxs)("main",{className:"min-h-screen",children:[(0,r.jsx)("div",{className:"bg-gradient-to-b from-blue-600 to-blue-700 text-white py-16",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-center mb-4",children:"المحتوى الأكثر تفاعلاً"}),(0,r.jsx)("p",{className:"text-lg text-center mb-8",children:"اكتشف أفضل المحتوى وأكثره تفاعلاً من مجتمع الفاتحون"}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-3 max-w-2xl mx-auto mt-8",children:Object.entries(c).map(e=>{let[t,s]=e;return(0,r.jsx)("button",{onClick:()=>v(s),className:"px-4 py-2 rounded-lg text-base font-medium transition-colors ".concat(b===s?"bg-white text-blue-700 shadow-md":"bg-white/20 text-white hover:bg-white/30"),children:d[s]},s)})}),(0,r.jsx)("div",{className:"flex justify-center mt-6",children:(0,r.jsxs)("div",{className:"inline-flex rounded-md shadow-sm bg-white/10 p-1",children:[(0,r.jsx)("button",{onClick:()=>f("day"),className:"px-3 py-1.5 text-sm rounded-md ".concat("day"===w?"bg-white text-blue-700":"text-white hover:bg-white/10"),children:"اليوم"}),(0,r.jsx)("button",{onClick:()=>f("week"),className:"px-3 py-1.5 text-sm rounded-md ".concat("week"===w?"bg-white text-blue-700":"text-white hover:bg-white/10"),children:"هذا الأسبوع"}),(0,r.jsx)("button",{onClick:()=>f("month"),className:"px-3 py-1.5 text-sm rounded-md ".concat("month"===w?"bg-white text-blue-700":"text-white hover:bg-white/10"),children:"هذا الشهر"}),(0,r.jsx)("button",{onClick:()=>f("all"),className:"px-3 py-1.5 text-sm rounded-md ".concat("all"===w?"bg-white text-blue-700":"text-white hover:bg-white/10"),children:"كل الوقت"})]})})]})}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:h?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-600 border-opacity-75"})}):u?(0,r.jsx)("div",{className:"bg-red-100 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:(0,r.jsx)("p",{children:u})}):0===a.length?(0,r.jsx)("div",{className:"text-center py-12 max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-8",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("h3",{className:"mt-4 text-xl font-medium text-gray-900",children:"لا توجد منشورات متاحة"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"لم نجد أي محتوى في هذه الفئة للإطار الزمني المحدد"}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)(i(),{href:"/blog/submit",className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"إضافة منشور جديد"]})})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:[d[b],"day"===w&&" اليوم","week"===w&&" هذا الأسبوع","month"===w&&" هذا الشهر"]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>{var t,s,l,n,a,i,c;return(0,r.jsx)("div",{className:"flex flex-col h-full",children:(0,r.jsx)(o.A,{id:e.id,slug:e.slug,title:e.title,summary:e.summary,category:e.category,featuredImage:e.featuredImage,author:{name:(null==(t=e.author)?void 0:t.name)||"فريق الفاتحون",avatar:null==(s=e.author)?void 0:s.avatar},createdAt:e.createdAt,commentsCount:(null==(l=e.comments)?void 0:l.length)||0,likesCount:(null==(a=e.interaction)||null==(n=a.likes)?void 0:n.length)||0,isLiked:(null==(c=e.interaction)||null==(i=c.likes)?void 0:i.includes("currentUserId"))||!1})},e.id)})})]}),(0,r.jsx)("div",{className:"text-center mt-8",children:(0,r.jsxs)(i(),{href:"/blog",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"العودة للمدونة"]})})]})})]})}},8327:(e,t,s)=>{Promise.resolve().then(s.bind(s,2247))}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,4212,6631,8441,1684,7358],()=>t(8327)),_N_E=e.O()}]);