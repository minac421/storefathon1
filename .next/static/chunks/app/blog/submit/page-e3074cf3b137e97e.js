(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{573:(e,s,a)=>{"use strict";a.d(s,{$$:()=>r,Fw:()=>n,Nc:()=>i,h_:()=>l,ox:()=>o,uT:()=>t});let r=[{id:8,src:"/images/avatars/hero_icon_8_wake.png",alt:"المحارب الأحمر"},{id:6,src:"/images/avatars/hero_icon_6_wake.png",alt:"قائد الجيش"},{id:3,src:"/images/avatars/hero_icon_3_wake.png",alt:"الفارس الأزرق"},{id:32,src:"/images/avatars/hero_icon_32_wake.png",alt:"الساحر"},{id:33,src:"/images/avatars/hero_icon_33_wake.png",alt:"القناص"},{id:34,src:"/images/avatars/hero_icon_34_wake.png",alt:"المقاتل الأسود"},{id:35,src:"/images/avatars/hero_icon_35_wake.png",alt:"الكاهن"},{id:36,src:"/images/avatars/hero_icon_36_wake.png",alt:"بطل الحرب"},{id:37,src:"/images/avatars/hero_icon_37_wake.png",alt:"المحارب الأسطوري"},{id:38,src:"/images/avatars/hero_icon_38_wake.png",alt:"فارس الظلام"},{id:39,src:"/images/avatars/hero_icon_39_wake.png",alt:"المدافع الذهبي"},{id:40,src:"/images/avatars/hero_icon_40_wake.png",alt:"صانع النار"},{id:41,src:"/images/avatars/hero_icon_41_wake.png",alt:"الملكة"},{id:42,src:"/images/avatars/hero_icon_42_wake.png",alt:"المتصيد"},{id:43,src:"/images/avatars/hero_icon_43_wake.png",alt:"سيد البحار"},{id:44,src:"/images/avatars/hero_icon_44_wake.png",alt:"الحارس الأمين"}],t=(e,s)=>{localStorage.setItem("userSettings",JSON.stringify({nickname:e,avatarId:s}))},l=()=>{{let e=localStorage.getItem("userSettings");if(e)return JSON.parse(e)}return null},n=e=>{if(!e)return"";let s=r.find(s=>s.id===e);return s?s.src:(console.log("لم يتم العثور على صورة بالمعرف:",e),"/images/avatars/hero_icon_8_wake.png")},o=e=>e?e.charAt(0):"؟",i=e=>e||"زائر"},1766:(e,s,a)=>{Promise.resolve().then(a.bind(a,5274))},5274:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var r=a(5155),t=a(2115),l=a(5695),n=a(573),o=function(e){return e.GUIDE="guide",e.NEWS="news",e.TIPS="tips",e.ANALYSIS="analysis",e.MARKET="market",e.MEMES="memes",e.EXPERIENCE="experience",e}(o||{});let i={guide:"دليل اللاعبين",news:"أخبار اللعبة",tips:"نصائح وحيل",analysis:"تحليلات وتقييمات",market:"أخبار السوق",memes:"ميمز وطرائف",experience:"تجارب اللاعبين"},d={guide:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),news:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),tips:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),analysis:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),market:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),memes:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),experience:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})};function c(){let e=(0,l.useRouter)(),[s,a]=(0,t.useState)(""),[c,m]=(0,t.useState)(""),[h,u]=(0,t.useState)(""),[x,g]=(0,t.useState)(!1),[p,v]=(0,t.useState)(null),[w,j]=(0,t.useState)(null),[f,b]=(0,t.useState)(null),[k,N]=(0,t.useState)(null),[_,y]=(0,t.useState)(!1),[L,M]=(0,t.useState)(null),[C,S]=(0,t.useState)(!1),z=(0,t.useRef)(null),R=(0,t.useRef)(null),[B,E]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=(0,n.h_)();e&&E(e)},[]);let P=e=>{u(e.toString()),g(!1)},W=async a=>{if(a.preventDefault(),!s.trim())return void M("يرجى كتابة محتوى للمنشور");y(!0),M(null);try{let a;if(p||f){let e=new FormData;e.append("content",s),c&&e.append("title",c),h&&e.append("category",h),p&&e.append("image",p),f&&e.append("video",f),e.append("authorName",(null==B?void 0:B.nickname)||"مستخدم جديد"),e.append("authorAvatar",B?(0,n.Fw)(B.avatarId):"/images/avatars/default.png"),a=await fetch("/api/blog",{method:"POST",body:e})}else{let e={content:s,title:c||"",category:h||null,summary:s.substring(0,150)+(s.length>150?"...":""),author:{name:(null==B?void 0:B.nickname)||"مستخدم جديد",avatar:B?(0,n.Fw)(B.avatarId):"/images/avatars/default.png",isVerified:!1}};a=await fetch("/api/blog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}if(!a.ok)throw Error("فشل في نشر المنشور");S(!0),setTimeout(()=>{e.push("/blog")},2e3)}catch(e){M(e instanceof Error?e.message:"حدث خطأ غير متوقع")}finally{y(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-cover bg-center",style:{backgroundImage:"url('/images/bg238.jpg')",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"overlay"},children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"إنشاء منشور جديد"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-200",children:"شارك منشوراً أو مقالاً جديداً مع مجتمع كونكيرورز"})]}),C?(0,r.jsx)("div",{className:"rounded-md bg-green-50 p-4 text-center",children:(0,r.jsxs)("div",{className:"flex justify-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"mr-3",children:(0,r.jsx)("p",{className:"text-sm font-medium text-green-800",children:"تم نشر المنشور بنجاح! جارٍ تحويلك..."})})]})}):(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,r.jsxs)("form",{onSubmit:W,className:"p-6 space-y-6",children:[L&&(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"mr-3",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:L})})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"عنوان المنشور (اختياري)"}),(0,r.jsx)("input",{type:"text",id:"title",value:c,onChange:e=>m(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 p-3 text-right shadow-sm focus:border-amber-500 focus:ring focus:ring-amber-500 focus:ring-opacity-50",placeholder:"أدخل عنواناً لمنشورك (اختياري)"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"فئة المنشور (اختياري)"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{g(!x)},className:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm px-4 py-3 text-right cursor-pointer focus:outline-none focus:ring-1 focus:ring-amber-500 focus:border-amber-500",children:[(0,r.jsx)("span",{className:"flex items-center",children:h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"ml-2 block truncate",children:d[h]}),(0,r.jsx)("span",{children:i[h]})]})}),(0,r.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x&&(0,r.jsx)("div",{className:"absolute mt-1 w-full rounded-md bg-white shadow-lg z-10",children:(0,r.jsx)("ul",{className:"max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:Object.values(o).map(e=>(0,r.jsxs)("li",{onClick:()=>P(e),className:"flex items-center text-gray-900 cursor-pointer select-none relative py-2 px-3 hover:bg-amber-50",children:[(0,r.jsx)("span",{className:"ml-3 block font-normal truncate",children:d[e]}),(0,r.jsx)("span",{children:i[e]})]},e))})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"محتوى المنشور"}),(0,r.jsx)("textarea",{id:"content",rows:5,value:s,onChange:e=>a(e.target.value),placeholder:"اكتب منشورك هنا...",className:"mt-1 block w-full rounded-md border border-gray-300 p-3 text-right shadow-sm focus:border-amber-500 focus:ring focus:ring-amber-500 focus:ring-opacity-50",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة للمنشور (اختياري)"}),(0,r.jsx)("div",{className:"border-2 border-gray-300 border-dashed rounded-md p-4",children:w?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:w,alt:"معاينة الصورة",className:"h-48 w-full object-contain rounded-md"}),(0,r.jsx)("button",{type:"button",onClick:()=>{v(null),j(null),z.current&&(z.current.value="")},className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 focus:outline-none shadow-md",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsxs)("label",{htmlFor:"image-upload",className:"mt-2 cursor-pointer text-amber-600 hover:text-amber-500 block",children:[(0,r.jsx)("span",{className:"mt-2 text-sm",children:"اضغط لتحميل صورة"}),(0,r.jsx)("input",{id:"image-upload",ref:z,onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(!a)return;v(a);let r=new FileReader;r.onloadend=()=>{j(r.result)},r.readAsDataURL(a)},type:"file",accept:"image/*",className:"sr-only"})]})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فيديو للمنشور (اختياري)"}),(0,r.jsx)("div",{className:"border-2 border-gray-300 border-dashed rounded-md p-4",children:k?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("video",{src:k,controls:!0,className:"max-h-48 w-full rounded-md"}),(0,r.jsx)("button",{type:"button",onClick:()=>{b(null),N(null),R.current&&(R.current.value="")},className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 focus:outline-none shadow-md",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),(0,r.jsxs)("label",{htmlFor:"video-upload",className:"mt-2 cursor-pointer text-amber-600 hover:text-amber-500 block",children:[(0,r.jsx)("span",{className:"mt-2 text-sm",children:"اضغط لتحميل فيديو"}),(0,r.jsx)("input",{id:"video-upload",ref:R,onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(!a)return;b(a);let r=new FileReader;r.onloadend=()=>{N(r.result)},r.readAsDataURL(a)},type:"file",accept:"video/*",className:"sr-only"})]})]})})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:_,className:"px-6 py-2.5 bg-amber-600 text-white rounded-md font-bold shadow-md transition-all ".concat(_?"opacity-70 cursor-not-allowed":"hover:bg-amber-700 hover:shadow-lg"),children:_?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"جاري النشر..."]}):"نشر"})})]})})]})})}},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var s=s=>e(e.s=s);e.O(0,[8441,1684,7358],()=>s(1766)),_N_E=e.O()}]);