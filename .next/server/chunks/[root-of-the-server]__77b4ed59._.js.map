{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minaa/CascadeProjects/conquerors-website/src/utils/mockData.ts"],"sourcesContent":["// نموذج بيانات رسائل الدردشة\r\nexport interface ChatMessage {\r\n  id: string;\r\n  sender: string;\r\n  senderAvatarId: number;\r\n  message: string;\r\n  timestamp: string;\r\n  interaction?: {\r\n    likes: string[];\r\n    isLiked?: boolean;\r\n  };\r\n}\r\n\r\n// إنشاء بيانات وهمية للرسائل الأولية\r\nexport function createMockMessages(): ChatMessage[] {\r\n  return [\r\n    { \r\n      id: '1', \r\n      sender: 'فاطمة', \r\n      senderAvatarId: 3, \r\n      message: 'مرحباً بالجميع في دردشة الفاتحون! هل يمكنني الحصول على نصائح لتطوير قلعتي؟', \r\n      timestamp: '2025-05-16T01:00:00.000Z',\r\n      interaction: {\r\n        likes: [],\r\n        isLiked: false\r\n      }\r\n    },\r\n    { \r\n      id: '2', \r\n      sender: 'عمر', \r\n      senderAvatarId: 1, \r\n      message: 'أهلاً فاطمة! أنصحك بالتركيز على تطوير الدفاعات أولاً وزيادة إنتاج الموارد', \r\n      timestamp: '2025-05-16T01:01:30.000Z',\r\n      interaction: {\r\n        likes: [],\r\n        isLiked: false\r\n      }\r\n    },\r\n    { \r\n      id: '3', \r\n      sender: 'خالد', \r\n      senderAvatarId: 5, \r\n      message: 'البوتات الذكية للمزارع ستساعدك كثيراً في توفير الموارد والوقت', \r\n      timestamp: '2025-05-16T01:03:00.000Z',\r\n      interaction: {\r\n        likes: [],\r\n        isLiked: false\r\n      }\r\n    },\r\n  ];\r\n}\r\n\r\n// نموذج بيانات المستخدمين المتصلين\r\nexport interface OnlineUser {\r\n  name: string;\r\n  avatarId: number;\r\n}\r\n\r\n// إنشاء بيانات وهمية للمستخدمين المتصلين\r\nexport function createMockOnlineUsers(): OnlineUser[] {\r\n  return [\r\n    { name: 'عمر', avatarId: 1 },\r\n    { name: 'خالد', avatarId: 5 },\r\n    { name: 'فاطمة', avatarId: 3 },\r\n    { name: 'محمد', avatarId: 2 },\r\n    { name: 'سارة', avatarId: 6 },\r\n    { name: 'أحمد', avatarId: 8 },\r\n    { name: 'نورا', avatarId: 4 }\r\n  ];\r\n} "],"names":[],"mappings":"AAAA,6BAA6B;;;;;AActB,SAAS;IACd,OAAO;QACL;YACE,IAAI;YACJ,QAAQ;YACR,gBAAgB;YAChB,SAAS;YACT,WAAW;YACX,aAAa;gBACX,OAAO,EAAE;gBACT,SAAS;YACX;QACF;QACA;YACE,IAAI;YACJ,QAAQ;YACR,gBAAgB;YAChB,SAAS;YACT,WAAW;YACX,aAAa;gBACX,OAAO,EAAE;gBACT,SAAS;YACX;QACF;QACA;YACE,IAAI;YACJ,QAAQ;YACR,gBAAgB;YAChB,SAAS;YACT,WAAW;YACX,aAAa;gBACX,OAAO,EAAE;gBACT,SAAS;YACX;QACF;KACD;AACH;AASO,SAAS;IACd,OAAO;QACL;YAAE,MAAM;YAAO,UAAU;QAAE;QAC3B;YAAE,MAAM;YAAQ,UAAU;QAAE;QAC5B;YAAE,MAAM;YAAS,UAAU;QAAE;QAC7B;YAAE,MAAM;YAAQ,UAAU;QAAE;QAC5B;YAAE,MAAM;YAAQ,UAAU;QAAE;QAC5B;YAAE,MAAM;YAAQ,UAAU;QAAE;QAC5B;YAAE,MAAM;YAAQ,UAAU;QAAE;KAC7B;AACH","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/minaa/CascadeProjects/conquerors-website/src/app/api/chat/messages/like/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { createMockMessages } from '@/utils/mockData';\r\n\r\n// استخدام نفس مصدر البيانات للرسائل المستخدم في API الرسائل\r\n// في بيئة حقيقية، سيتم استخدام قاعدة بيانات\r\n// نحن نستخدم المتغير المستورد من ملف آخر، لذا فإن التغييرات ستكون محلية وستُفقد عند إعادة تشغيل الخادم\r\n// ولكن هذه نسخة تجريبية\r\nlet chatMessages: any[] = [];\r\n\r\n// استدعاء الدالة المعدة مسبقًا إذا كانت المصفوفة فارغة\r\nif (chatMessages.length === 0) {\r\n  chatMessages = createMockMessages();\r\n}\r\n\r\nexport async function POST(req: NextRequest) {\r\n  try {\r\n    const { messageId, userId } = await req.json();\r\n    \r\n    // التحقق من البيانات المدخلة\r\n    if (!messageId) {\r\n      return NextResponse.json({ \r\n        success: false, \r\n        error: 'معرف الرسالة مطلوب' \r\n      }, { status: 400 });\r\n    }\r\n    \r\n    // البحث عن الرسالة\r\n    const messageIndex = chatMessages.findIndex(m => m.id === messageId);\r\n    \r\n    if (messageIndex === -1) {\r\n      return NextResponse.json({ \r\n        success: false, \r\n        error: 'الرسالة غير موجودة' \r\n      }, { status: 404 });\r\n    }\r\n    \r\n    // تحديث الإعجاب\r\n    const message = chatMessages[messageIndex];\r\n    \r\n    // التحقق مما إذا كان المستخدم قد أعجب بالفعل بالرسالة\r\n    const userLiked = message.interaction.likes.includes(userId);\r\n    \r\n    if (userLiked) {\r\n      // إزالة الإعجاب\r\n      message.interaction.likes = message.interaction.likes.filter((id: string) => id !== userId);\r\n    } else {\r\n      // إضافة الإعجاب\r\n      message.interaction.likes.push(userId);\r\n    }\r\n    \r\n    // تحديث الرسالة\r\n    chatMessages[messageIndex] = message;\r\n    \r\n    return NextResponse.json({ \r\n      success: true, \r\n      message: {\r\n        ...message,\r\n        interaction: {\r\n          ...message.interaction,\r\n          isLiked: !userLiked\r\n        }\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('Error liking message:', error);\r\n    return NextResponse.json({ \r\n      success: false, \r\n      error: 'فشل في تحديث الإعجاب بالرسالة' \r\n    }, { status: 500 });\r\n  }\r\n} "],"names":[],"mappings":";;;AAAA;AACA;;;AAEA,4DAA4D;AAC5D,4CAA4C;AAC5C,uGAAuG;AACvG,wBAAwB;AACxB,IAAI,eAAsB,EAAE;AAE5B,uDAAuD;AACvD,IAAI,aAAa,MAAM,KAAK,GAAG;IAC7B,eAAe,CAAA,GAAA,0HAAA,CAAA,qBAAkB,AAAD;AAClC;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;QAE5C,6BAA6B;QAC7B,IAAI,CAAC,WAAW;YACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,mBAAmB;QACnB,MAAM,eAAe,aAAa,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAE1D,IAAI,iBAAiB,CAAC,GAAG;YACvB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,gBAAgB;QAChB,MAAM,UAAU,YAAY,CAAC,aAAa;QAE1C,sDAAsD;QACtD,MAAM,YAAY,QAAQ,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC;QAErD,IAAI,WAAW;YACb,gBAAgB;YAChB,QAAQ,WAAW,CAAC,KAAK,GAAG,QAAQ,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,KAAe,OAAO;QACtF,OAAO;YACL,gBAAgB;YAChB,QAAQ,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC;QACjC;QAEA,gBAAgB;QAChB,YAAY,CAAC,aAAa,GAAG;QAE7B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;gBACP,GAAG,OAAO;gBACV,aAAa;oBACX,GAAG,QAAQ,WAAW;oBACtB,SAAS,CAAC;gBACZ;YACF;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;QACT,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF","debugId":null}}]
}